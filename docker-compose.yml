version: '3.7'

services:

  # db:
  #   build: db
  #   image: dockersamples/k8s-wordsmith-db

  # words:
  #   build: words
  #   image: dockersamples/k8s-wordsmith-api
  #   deploy:
  #     replicas: 5

  # web:
  #   build: web
  #   image: dockersamples/k8s-wordsmith-web
  #   ports:
  #    - "8080:80"


  # api:
  #   build: api
  #   image: tutum/hello-world
  #   ports:
  #    - "8080:80"

  # TODO: change to kubernetes yml and add autoscaling (requests-per-second)

  api:
    image: knr-api
    build:
      context: ./projects/api
      dockerfile: Dockerfile
    entrypoint: /root/api/entrypoint.sh
    volumes:
      - //c/code/personal/kube-node-react/projects/api:/root/api # https://github.com/docker/for-win/issues/3289
    working_dir: /root/api
    ports:
      - 8080:80
    deploy:
      replicas: 2
